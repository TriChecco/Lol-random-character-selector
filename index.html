<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LoL Random Picker</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{ --bg:#0b1020; --muted:#9aa4b2; --radius:14px; }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    body{background:radial-gradient(1200px 600px at 10% 10%, rgba(99,102,241,0.08), transparent 10%), radial-gradient(900px 500px at 90% 90%, rgba(6,182,212,0.06), transparent 10%), var(--bg);display:flex;align-items:center;justify-content:center;padding:24px;color:#e6eef6}
    .wrap{width:min(920px,100%);display:grid;grid-template-columns:1fr 360px;gap:28px;align-items:start}
    @media (max-width:880px){ .wrap{ grid-template-columns:1fr; } }
    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);padding:24px;border-radius:var(--radius);box-shadow:0 6px 30px rgba(2,6,23,0.6)}
    .app-header{display:flex;gap:12px;align-items:center;margin-bottom:18px}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(90deg,#7c3aed,#06b6d4);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:20px}
    h1{margin:0;font-size:20px;font-weight:600;color:#f8fafc}
    p.lead{margin:6px 0 0;color:var(--muted);font-size:13px}
    .controls{display:flex;gap:12px;align-items:center;margin-bottom:18px;flex-wrap:wrap}
    .btn{--p:12px 18px;display:inline-flex;align-items:center;gap:8px;padding:var(--p);border-radius:10px;border:none;cursor:pointer;background:linear-gradient(180deg,#5740e6 0%, #4f46e5 100%);color:white;font-weight:600;font-size:14px;box-shadow:0 6px 18px rgba(79,70,229,0.18);transition:transform .12s ease}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:#dbeafe;box-shadow:none;font-weight:600}
    .small{padding:8px 10px;font-size:13px;border-radius:8px}
    .result{display:flex;gap:12px;align-items:center;padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));border:1px solid rgba(255,255,255,0.03)}
    .avatar{width:84px;height:84px;border-radius:22px;flex:0 0 84px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;background:linear-gradient(135deg,#354052,#111827);color:white;overflow:hidden;position:relative}
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    .meta{display:flex;flex-direction:column;gap:6px;min-width:0}
    .champ-name{font-size:18px;font-weight:700;color:#fff;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}
    .role-row{display:flex;gap:8px;align-items:center}
    .role-icon{width:36px;height:36px;display:inline-flex;align-items:center;justify-content:center;border-radius:10px;background:rgba(255,255,255,0.04)}
    .role-badge{display:inline-block;padding:6px 10px;border-radius:999px;font-weight:700;font-size:13px;color:#061826;background:white}
    .sidebar h3{margin:0 0 8px 0;font-size:16px}
    .option{display:flex;gap:8px;align-items:center;margin:8px 0;color:var(--muted);font-size:14px}
    .actions{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
    .toast{margin-top:12px;color:var(--muted);font-size:13px}
    footer.note{text-align:center;margin-top:18px;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <header class="app-header">
        <div class="logo">LoL</div>
        <div>
          <h1>LoL Random Picker</h1>
          <p class="lead">Un aiuto rapido per scegliere campione e ruolo.</p>
        </div>
      </header>

      <div class="controls">
        <button id="rollBtn" class="btn">üé≤ Genera</button>
        <button id="copyBtn" class="btn ghost small">üìã Copia</button>
        <button id="shareBtn" class="btn ghost small">üîó Condividi</button>
        <label style="margin-left:auto;display:flex;align-items:center;gap:8px;color:var(--muted);font-size:13px;"><input id="autoRole" type="checkbox" checked style="width:14px;height:14px;"/> Assegna ruolo random</label>
      </div>

      <div id="resultCard" class="result" aria-live="polite" style="opacity:0;transform:translateY(6px);transition:opacity .28s ease,transform .28s ease;">
        <div class="avatar" id="avatar"><span id="avatarText">?</span></div>
        <div class="meta">
          <div class="champ-name" id="champion">Nessun campione</div>
          <div class="role-row"><div id="roleIcon" class="role-icon" aria-hidden="true"> </div><div id="roleBadge" class="role-badge">Role</div></div>
        </div>
      </div>

      <footer class="note">Tip: aggiungi immagini in /images per le icone dei campioni (es: images/ahri.png). Ho aggiunto icone ruoli integrate.</footer>
    </div>

    <aside class="panel sidebar">
      <h3>Personalizza</h3>
      <div class="option"><strong>Avatar immagini:</strong> aggiungi files in images/&lt;slug&gt;.png (es: images/ahri.png).</div>
      <div class="option"><strong>Icone ruoli:</strong> sono incluse direttamente nella pagina per Top/Jungle/Mid/ADC/Support.</div>
      <div style="height:12px"></div>
      <h3>Idee</h3>
      <ul style="margin:6px 0 0 18px;color:var(--muted)"><li>Scarica icone ufficiali e salvale in /images/icons per visualizzarle.</li><li>Aggiungi tooltip con lore e statistiche.</li></ul>
      <div class="actions"><button id="resetBtn" class="btn ghost small">üîÅ Reset</button><button id="downloadBtn" class="btn ghost small">‚¨áÔ∏é Scarica</button></div>
      <div class="toast" id="toast" role="status" aria-live="polite"></div>
    </aside>
  </div>

  <script>
    const champions = ["Aatrox","Ahri","Akali","Akshan","Alistar","Amumu","Anivia","Annie","Aphelios","Ashe","Aurelion Sol","Azir","Bard","Bel'Veth","Blitzcrank","Brand","Braum","Caitlyn","Camille","Cassiopeia","Cho'Gath","Corki","Darius","Diana","Dr. Mundo","Draven","Ekko","Elise","Evelynn","Ezreal","Fiddlesticks","Fiora","Fizz","Galio","Gangplank","Garen","Gnar","Gragas","Graves","Gwen","Hecarim","Heimerdinger","Illaoi","Irelia","Ivern","Janna","Jarvan IV","Jax","Jayce","Jhin","Jinx","Kai'Sa","Kalista","Karma","Karthus","Kassadin","Katarina","Kayle","Kayn","Kennen","Kha'Zix","Kindred","Kled","Kog'Maw","LeBlanc","Lee Sin","Leona","Lillia","Lissandra","Lucian","Lulu","Lux","Malphite","Malzahar","Maokai","Master Yi","Miss Fortune","Mordekaiser","Morgana","Nami","Nasus","Nautilus","Neeko","Nidalee","Nocturne","Nunu & Willump","Olaf","Orianna","Ornn","Pantheon","Poppy","Pyke","Qiyana","Quinn","Rakan","Rammus","Rek'Sai","Rell","Renata Glasc","Renekton","Rengar","Riven","Rumble","Ryze","Samira","Sejuani","Senna","Seraphine","Sett","Shaco","Shen","Shyvana","Singed","Sion","Sivir","Skarner","Sona","Soraka","Swain","Sylas","Syndra","Tahm Kench","Taliyah","Talon","Taric","Teemo","Thresh","Tristana","Trundle","Tryndamere","Twisted Fate","Twitch","Udyr","Urgot","Varus","Vayne","Veigar","Vel'Koz","Vi","Viego","Viktor","Vladimir","Volibear","Warwick","Wukong","Xayah","Xerath","Xin Zhao","Yasuo","Yone","Yorick","Yuumi","Zac","Zed","Ziggs","Zilean","Zoe","Zyra"];
    const roles = ["Top","Jungle","Mid","ADC","Support"];

    const rollBtn = document.getElementById('rollBtn');
    const copyBtn = document.getElementById('copyBtn');
    const shareBtn = document.getElementById('shareBtn');
    const resetBtn = document.getElementById('resetBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const resultCard = document.getElementById('resultCard');
    const champEl = document.getElementById('champion');
    const roleBadge = document.getElementById('roleBadge');
    const avatar = document.getElementById('avatar');
    const avatarText = document.getElementById('avatarText');
    const toast = document.getElementById('toast');
    const roleIcon = document.getElementById('roleIcon');
    const autoRole = document.getElementById('autoRole');

    function slug(name){ return name.toLowerCase().replace(/[^a-z0-9]/g,''); }

    function tryLoadChampionImages(name){
      const possibilities = [
        `./images/${slug(name)}.png`,
        `./images/${slug(name)}.webp`,
        `./images/icons/${slug(name)}.png`,
        `./images/icons/${slug(name)}.webp`
      ];
      return new Promise((resolve)=>{
        let i=0;
        function tryNext(){
          if(i>=possibilities.length) return resolve(null);
          const url = possibilities[i++];
          const img = new Image(); img.src = url; img.onload = ()=>resolve(url); img.onerror=tryNext;
        }
        tryNext();
      });
    }

    async function loadChampionImage(name){
      const found = await tryLoadChampionImages(name);
      avatar.innerHTML = '';
      if(found){
        const img = document.createElement('img'); img.src = found; img.alt = name; avatar.appendChild(img);
      } else {
        const initials = getInitials(name);
        const el = document.createElement('div');
        el.style.width='100%'; el.style.height='100%'; el.style.display='flex'; el.style.alignItems='center'; el.style.justifyContent='center'; el.style.fontWeight='700'; el.style.fontSize='18px'; el.style.color='white'; el.style.background = gradientFor(name);
        el.textContent = initials;
        avatar.appendChild(el);
      }
    }

    function getInitials(name){ const parts = name.split(/\s|&|'|/).filter(Boolean); if(parts.length===1) return parts[0].slice(0,2).toUpperCase(); return (parts[0][0]+parts[1][0]).toUpperCase(); }
    function gradientFor(name){ const colors=[['#7c3aed','#06b6d4'],['#f97316','#fb7185'],['#06b6d4','#7c3aed'],['#60a5fa','#22c1c3'],['#fb7185','#f97316'],['#34d399','#60a5fa']]; let n=0; for(let i=0;i<name.length;i++) n=(n*31+name.charCodeAt(i))>>>0; const pick=colors[n%colors.length]; return `linear-gradient(135deg, ${pick[0]}, ${pick[1]})`; }

    function setRoleIcon(role){
      const svgs = {
        Top: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L3 7v5c0 5 3.58 9 9 10 5.42-1 9-5 9-10V7l-9-5z" fill="#F97316"/></svg>`,
        Jungle: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C9 6 5 7 5 11c0 4 4 7 7 9s7-3 7-7c0-4-4-5-7-11z" fill="#10B981"/></svg>`,
        Mid: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="8" r="3" fill="#EF4444"/><path d="M12 2v6l4 8H8l4-8V2z" fill="#FB7185"/></svg>`,
        ADC: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 12l7 7 13-13-7-7L2 12z" fill="#60A5FA"/></svg>`,
        Support: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a5 5 0 00-5 5v2a5 5 0 005 5 5 5 0 005-5V7a5 5 0 00-5-5z" fill="#A78BFA"/></svg>`
      };
      roleIcon.innerHTML = svgs[role] || '';
      roleIcon.style.background = 'linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))';
    }

    function setRoleBadge(role){ roleBadge.textContent = role; }

    function showResult(champ, role){ champEl.textContent = champ; setRoleBadge(role); setRoleIcon(role); loadChampionImage(champ); resultCard.style.opacity='1'; resultCard.style.transform='translateY(0)'; }

    function roll(){ const champ = champions[Math.floor(Math.random()*champions.length)]; const role = autoRole.checked ? roles[Math.floor(Math.random()*roles.length)] : 'Mid'; showResult(champ, role); }

    function showToast(text, timeout=2200){ toast.textContent = text; setTimeout(()=>{ if(toast.textContent===text) toast.textContent=''; }, timeout); }

    copyBtn.addEventListener('click', ()=>{ const c=champEl.textContent||''; const r=roleBadge.textContent||''; if(!c){ showToast('Nessun risultato da copiare'); return; } navigator.clipboard?.writeText(`${c} ‚Äî ${r}`).then(()=>showToast('Copiato negli appunti')).catch(()=>showToast('Impossibile copiare')); });
    shareBtn.addEventListener('click', async ()=>{ const c=champEl.textContent||''; const r=roleBadge.textContent||''; if(!c){ showToast('Genera prima'); return; } const text=`Il mio campione: ${c} ‚Äî ${r} (da LoL Random Picker)`; if(navigator.share){ try{ await navigator.share({title:'LoL Random Picker',text}); showToast('Condiviso'); }catch(e){ showToast('Condivisione annullata'); } } else { navigator.clipboard?.writeText(`${text}\n${location.href}`).then(()=>showToast('Testo e link copiati')); } });
    resetBtn.addEventListener('click', ()=>{ champEl.textContent='Nessun campione'; avatar.innerHTML='<span id="avatarText">?</span>'; roleBadge.textContent='Role'; roleIcon.innerHTML=''; resultCard.style.opacity='0'; resultCard.style.transform='translateY(6px)'; showToast('Reset'); });
    downloadBtn.addEventListener('click', ()=>{ const c=champEl.textContent||''; const r=roleBadge.textContent||''; if(!c){ showToast('Genera prima'); return; } const blob=new Blob([`${c} ‚Äî ${r}`],{type:'text/plain'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='lol-random.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url); showToast('Scaricato'); });
    document.addEventListener('keydown',(e)=>{ if(e.key===' '||e.key==='Enter'){ e.preventDefault(); rollBtn.focus(); roll(); } if(e.key.toLowerCase()==='r') roll(); });
    rollBtn.addEventListener('click', roll);
    avatar.innerHTML = '<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#9aa4b2">?</div>';
  </script>
</body>
</html>
